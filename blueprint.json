{
	"title": "Mariadb",
	"description": "Mariadb Server",
	"configuration": {
		"root_password": "^^random(32)^^",
		"max_allowed_packet": "4M",
		"event_scheduler": 1,
		"sql_mode": 1,
		"local_infile": 1,
		"innodb_buffer_pool_size": 134217728
	},
	"volumes": [
		{
			"destination": "/var/lib/mariadb/",
			"source": "data"
		},
		{
			"destination": "/var/log/",
			"source": "logs"
		}
	],
	"bindings": [
		{
			"type": "embed",
			"descriptor": {
				"repository": "https://github.com/MarkRatjens/enginesd_debian_base"
			},
			"variables": {
				"locale": "^^locale^^",
				"charset": "^^charset^^"
			}
		}
	],
	"os_packages": {
		"adds": [
			"default-mysql-server"
		]
	},
	"containers": [
		{
			"type": "lxd"
		}
	],
	"binding_anchor": {
		"configuration": {
			"databasename": "^^identifier^^",
			"username": "^^identifier^^_user",
			"password": "^^random(16)^^",
			"collation": "utf8_general_ci",
			"charset": "utf8",
			"super_user": false,
			"grant:": false
		},
		"scripts": {
			"shell": {
				"binding": [
					"/usr/local/bin/create_db_and_user.sh"
				],
				"unbinding": [
					"/usr/local/bin/delete_db_and_user.sh"
				],
				"changing": [
					"/usr/local/bin/update_db_and_user.sh"
				]
			}
		}
	}
}
